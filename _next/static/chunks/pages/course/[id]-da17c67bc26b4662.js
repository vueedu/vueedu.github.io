(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{9032:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/course/[id]",function(){return n(7925)}])},6170:function(e,s,n){"use strict";var t=n(5893),a=n(1382);let l=e=>(0,t.jsx)("div",{className:"loading-container",children:(0,t.jsx)(a.Z,{tip:"数据加载中...",size:"small",...e})});s.Z=l},7925:function(e,s,n){"use strict";n.r(s),n.d(s,{__N_SSG:function(){return V},default:function(){return B}});var t=n(5893),a=n(7294),l=n(6486),i=n(808),c=n(9250),r=n(1653),o=n(9499);let d=e=>{let{items:s}=e,[n,l]=(0,a.useState)(s[0].key),i=e=>{l(e)};return(0,t.jsxs)("div",{className:"tabs",children:[(0,t.jsx)("div",{className:"tab-nav-list",children:s.map(e=>{let{title:s,key:a}=e;return(0,t.jsx)("div",{className:"tabs-tab ".concat(a===n?"tabs-tab-active":""),onClick:()=>i(a),children:s},a)})}),(0,t.jsx)("div",{className:"tabs-content-list",children:s.map(e=>{let{key:s,content:a}=e;return(0,t.jsx)("div",{className:"tabs-content-item ".concat(s===n?"":"tabs-content-item-hidden"),children:a},s)})})]})};var m=n(6170),u=n(5581),h=n(4119),x=n(7950),j=n(6205),p=n(1577),v=n(7207),g=n(9843),N=n(1534),f=n(7789);let b=["大一","大二","大三","大四","硕士研究生","博士研究生","大学老师","公司技术工程师","其他"],y=[{value:"未订阅通知",label:"不订阅通知"},{value:"已订阅短信通知",label:"订阅短信通知"},{value:"已订阅电话通知",label:"订阅电话通知"},{value:"已订阅全部通知",label:"订阅全部通知"}],I=e=>{let[s]=u.Z.useForm(),n=(0,f.o)(),a=n.client.client,l=async s=>{let n={...s};2!=n.status||n.name.endsWith("老师")||(n.name=n.name+"老师"),n.status=n.status||1,n.phone=localStorage.getItem(g.VY),n.clientId=e.courseInfo.clientId,n.courseId=e.courseInfo.courseId,n.uniCourseId=e.courseInfo.id,n.course=e.courseInfo.title,n.verify="1",n.classId=1;let t=await (0,N.L0)(n);t&&(0,N.Cz)({content:"您好，课程《".concat(n.course,"》新增一条报名记录，姓名：").concat(n.name,"，性别：").concat(n.gender,"，年级：").concat(n.age,"，联系方式：").concat(n.phone,"，报名时间：").concat(new Date().toLocaleString(),"，备注：").concat(n.tag),subject:"".concat(a.clientName,"—课程报名—").concat(n.course),toEmail:"all@maodou.io"}),e.onSubmit(t)};return(0,t.jsxs)(u.Z,{form:s,className:"normal-form",onFinish:l,autoComplete:"off",size:"large",labelCol:{span:4},wrapperCol:{span:20},initialValues:{gender:"男",tag:y[1].value},children:[(0,t.jsx)("h3",{children:"报名"}),(0,t.jsx)(u.Z.Item,{label:"姓名",name:"name",rules:[{required:!0,message:"请输入姓名"}],children:(0,t.jsx)(h.Z,{placeholder:"请输入姓名"})}),(0,t.jsx)(u.Z.Item,{label:"性别",name:"gender",children:(0,t.jsxs)(x.ZP.Group,{children:[(0,t.jsx)(x.ZP,{value:"男",children:"男"}),(0,t.jsx)(x.ZP,{value:"女",children:"女"})]})}),(0,t.jsx)(u.Z.Item,{label:"年级",name:"age",children:(0,t.jsx)(j.Z,{children:b.map(e=>(0,t.jsx)(j.Z.Option,{value:e,children:e},e))})}),(0,t.jsx)(u.Z.Item,{label:"备注",name:"tag",children:(0,t.jsx)(j.Z,{children:y.map(e=>{let{label:s,value:n}=e;return(0,t.jsx)(j.Z.Option,{value:n,children:s},n)})})}),(0,t.jsx)(u.Z.Item,{wrapperCol:{span:24},children:(0,t.jsx)(p.Z,{style:{width:"100%"},type:"primary",htmlType:"submit",children:"确认"})})]})},Z=e=>{let[s,n]=(0,a.useState)(e.defaultVisible),l=(0,f.o)(),i=l.myRegisters.myRegisters,c=s=>{var t;l.myRegisters.setMyRegisters((i||[]).concat(s)),null===(t=e.onRegisterCourse)||void 0===t||t.call(e,s),n(!1)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"btn",onClick:()=>n(!0),children:"立即报名"}),(0,t.jsx)(v.Z,{width:350,visible:s,footer:null,onCancel:()=>n(!1),maskClosable:!1,children:(0,t.jsx)(I,{onSubmit:c,courseInfo:e.courseInfo})})]})};var w=n(3019),C=n(400),R=n(2986),k=n(3817);let S={2:"status-teacher.png",4:"status-ta.png",5:"status-admin.png"},_=e=>{let s=(0,w.dD)();return(0,l.isEmpty)(e.data)?(0,t.jsx)("div",{className:"studentlist-wrap",children:(0,t.jsx)(R.Z,{})}):(null==s?void 0:s.mobile())?(0,t.jsx)("div",{className:"list-mobile",children:(0,l.map)(e.data,(e,s)=>(0,t.jsxs)("div",{className:"list-item",children:[(0,t.jsx)("div",{className:"list-item-index",children:s+1}),(0,t.jsxs)("div",{className:"list-item-main-info",children:[(0,t.jsxs)("div",{className:"info-name",children:[e.name,e.status!==o.d.STUDENT&&(0,t.jsx)("img",{height:"14",src:"/img/".concat(S[e.status]),alt:"student-status-png"})]}),(0,t.jsx)("div",{className:"info-other",children:(0,t.jsxs)("span",{className:"current-bg",children:[(0,t.jsx)("span",{className:"list-item-label",children:"职业:"})," ",e.age]})})]}),(0,t.jsx)("div",{className:"list-item-gender ".concat("女"===e.gender?"woman":"man"),children:"女"===e.gender?(0,t.jsx)(k.Z,{symbol:"icon-nv"}):(0,t.jsx)(k.Z,{symbol:"icon-xingbienan"})}),(0,t.jsx)("div",{className:"list-item-tag",children:e.tag})]},e.id))}):(0,t.jsx)("div",{className:"list-wrap",children:(0,t.jsxs)("table",{cellSpacing:"0",cellPadding:"0",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:(0,t.jsx)("span",{children:"昵称"})}),(0,t.jsx)("th",{children:(0,t.jsx)("span",{children:"年级"})}),(0,t.jsx)("th",{children:(0,t.jsx)("span",{children:"性别"})}),(0,t.jsx)("th",{children:(0,t.jsx)("span",{children:"备注"})})]})}),(0,t.jsx)("tbody",{children:(0,l.map)(e.data,(e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{className:"lalign",children:[(0,t.jsx)("span",{className:"index",children:s+1}),(0,t.jsxs)("span",{className:"student-name",children:[e.name,e.status!==o.d.STUDENT&&(0,t.jsx)("img",{height:"14",src:"/img/".concat(S[e.status]),alt:"student-status-png"})]})]}),(0,t.jsx)("td",{children:e.age}),(0,t.jsx)("td",{children:e.gender}),(0,t.jsx)("td",{children:e.tag})]},e.id))})]})})};var E=n(1527),T=n(1163),U=n(6368);let O=["教室号","课程名称","开始时间","上课地点","备注","课堂回放"],D=e=>{let s=(0,w.dD)(),n=(0,T.useRouter)(),a=(0,f.o)(),{id:i}=n.query,c=async e=>n.push("".concat(i,"/replay/").concat(e.id)),r=a.myRegisters.myRegisters,o=e=>{var s;if(null===(s=a.user.currentUser)||void 0===s?void 0:s.phone){let s=(0,l.find)(r,e=>e.courseId===i);if(s){let{verify:n}=s;"1"===n?c(e):E.u_.alert({content:"报名信息审核通过即可观看",closeOnMaskClick:!0})}else E.u_.alert({content:"请报名后观看",closeOnMaskClick:!0})}else a.login.setLoginDialogVisible(!0)};return(null==s?void 0:s.mobile())?(0,t.jsx)("div",{className:"list-mobile",children:(0,l.map)(e.data,e=>(0,t.jsxs)("div",{className:"list-item",onClick:()=>o(e),children:[(0,t.jsxs)("div",{className:"list-item-main-info",children:[(0,t.jsxs)("div",{className:"info-name",children:[e.className,(0,t.jsx)("span",{className:"location-tag",children:e.location})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"list-item-label",children:"教室号:"})," ",e.roomId]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"list-item-label",children:"开始时间:"})," ",e.startAt]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"list-item-label",children:"备注:"})," ",e.remark]})]}),(0,t.jsx)("div",{className:"list-item-actions",children:(0,t.jsx)(k.Z,{symbol:"icon-bofang"})})]},e.id))}):(0,t.jsx)("div",{className:"list-wrap",children:(0,t.jsxs)("table",{cellSpacing:"0",cellPadding:"0",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:O.map(e=>(0,t.jsx)("th",{children:(0,t.jsx)("span",{children:e})},e))})}),(0,t.jsx)("tbody",{children:(0,l.map)(e.data,(e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{className:"lalign",children:[(0,t.jsx)("span",{className:"index",children:s+1}),e.roomId]}),(0,t.jsx)("td",{children:e.className}),(0,t.jsx)("td",{children:e.startAt}),(0,t.jsx)("td",{children:e.location}),(0,t.jsx)("td",{children:e.remark}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"player-btn",onClick:()=>o(e),children:(0,t.jsx)(k.Z,{symbol:"icon-bofang"})})})]},e.id))})]})})};var L=(0,U.Pi)(D),M=n(7277);let P=(0,U.Pi)(e=>{let s=(0,f.o)(),n=s.user.currentUser,i=s.myRegisters.myRegisters,{id:o}=(0,c.UO)(),d=(0,a.useRef)(null),m=(0,a.useRef)(null),u="";if(null==n?void 0:n.phone){let s=(0,l.find)(i,e=>e.courseId===o),n="";n=s?encodeURIComponent("pages/room/room?userId=".concat(s.phone,"-m&roomId=").concat(e.courseInfo.roomId,"&role=").concat(g.sJ[s.status]||"student","&username=").concat(s.name,"-m")):encodeURIComponent("pages/index/index?roomId=".concat(e.courseInfo.roomId)),u="".concat(C._,"/seller/api/room/path.jpg?path=").concat(n)}return(0,a.useEffect)(()=>{if(m.current){let e=m.current,s=new XMLSerializer().serializeToString(e);d.current.src="data:image/svg+xml;base64,".concat(btoa(s))}},[m.current]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{ref:m,style:{display:"none",height:"auto",maxWidth:"100%",width:"100%"},value:window.location.href,fgColor:"#3db477",viewBox:"0 0 256 256"}),(0,t.jsxs)("div",{className:"share-box",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)(k.Z,{symbol:"icon-share"}),"分享二维码"]}),(0,t.jsx)("span",{style:{marginBottom:10},children:"邀请好友加入课堂"}),(0,t.jsxs)("div",{className:"share-imgs ".concat(e.isMobile?"share-imgs-mobile":""),children:[(0,t.jsx)("img",{ref:d,alt:"share-course",className:"qr-code"}),u&&(0,t.jsx)("img",{src:u,alt:"mini"})]})]})]})}),A=(0,U.Pi)(e=>{let s=(0,f.o)(),n=s.user.currentUser,a=s.myRegisters.myRegisters||[],{id:i}=(0,c.UO)(),r=()=>{s.login.setLoginDialogVisible(!0)};if(null==n?void 0:n.phone){let s=(0,l.find)(a,s=>s.courseId==e.courseInfo.courseId);return s?(0,t.jsx)("button",{className:"btn",onClick:()=>{let{verify:n}=s;"1"===n?M.c.course.enterCourse(e.courseInfo,a):E.u_.alert({content:"报名信息审核通过即可进入教室",closeOnMaskClick:!0})},children:"已报名，进入教室"}):(0,t.jsx)(Z,{...e})}return(0,t.jsx)("button",{className:"btn",onClick:r,children:"登录"})}),F=e=>{var s,n,c,r,u;let{data:h}=e,[x,j]=(0,a.useState)({...h}),[p,v]=(0,a.useState)([]),g=(0,w.dD)(),b=(0,a.useRef)({}),[y,I]=(0,a.useState)(!0),Z=()=>{(0,N.XR)(x.courseId).then(e=>{j({...x,introduction:e.introduction})})},C=(0,a.useCallback)(async()=>{let e=await (0,N.mU)(h.courseId),s=(0,l.groupBy)(e,"status"),n=s[o.d.TEACHER]||[],t=s[o.d.TUTOR]||[],a=s[o.d.ADMIN]||[],i=[];(0,l.keys)(s).filter(e=>![o.d.TEACHER,o.d.TUTOR,o.d.ADMIN].includes(e)).forEach(e=>{i=i.concat(s[e])}),b.current.applyStudents=i,b.current.teacher=(0,l.last)(n);let c=n.concat(t,a,i);v(c),b.current.if_teacher=!b.current.teacher;let r=await (0,N.Rj)(h.courseId);b.current.replayList=r,b.current.validReplayList=(0,l.sortBy)(r.filter(e=>{let{status:s}=e;return 1==s})||[],e=>e.startAt),Z(),I(!1)},[]);if((0,a.useEffect)(()=>{C()},[C]),y)return(0,t.jsx)(m.Z,{});let R=[{key:"intro",title:"课程介绍",content:x.introduction?(0,t.jsx)("div",{className:"ql-snow ql-editor",dangerouslySetInnerHTML:{__html:x.introduction}}):(0,t.jsx)(m.Z,{className:"course-loading"})},{key:"student",title:"报名成员(".concat((null==p?void 0:p.length)||0,")"),content:(0,t.jsx)(_,{data:p})},{key:"replay",title:"课堂回放(".concat(null===(s=b.current.validReplayList)||void 0===s?void 0:s.length,")"),content:(0,t.jsx)(L,{data:b.current.validReplayList})}],S=e=>{v((p||[]).concat(e)),b.current.applyStudents=(b.current.applyStudents||[]).concat(e)};return(0,f.o)(),(0,t.jsxs)("div",{className:"course-detail-wrapper",children:[(0,t.jsxs)("section",{className:"main-content",children:[(0,t.jsx)("img",{src:x.coverUrl,alt:"coverUrl",className:"course-cover"}),(0,t.jsx)("div",{className:"course-main-info",children:(null==g?void 0:g.mobile())?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"course-title",children:x.title}),(0,t.jsxs)("div",{className:"course-info",children:[(0,t.jsxs)("div",{className:"course-info-item",children:[(0,t.jsx)("span",{className:"course-info-item-label",children:"任课教师: "}),null===(n=b.current.teacher)||void 0===n?void 0:n.name]}),(0,t.jsxs)("div",{className:"course-info-item",children:[(0,t.jsx)("span",{className:"course-info-item-label",children:"学生人数: "}),null===(c=b.current.applyStudents)||void 0===c?void 0:c.length," 人"]}),(0,t.jsxs)("span",{className:"course-actions",children:[(0,t.jsx)("span",{className:"course-price",children:"\xa5"+x.price}),(0,t.jsx)(i.Z,{placement:"leftTop",content:(0,t.jsx)(P,{courseInfo:x,isMobile:!0}),trigger:"click",children:(0,t.jsx)("span",{className:"share-icon",children:(0,t.jsx)(k.Z,{symbol:"icon-share"})})})]})]}),(0,t.jsx)(A,{courseInfo:x,onRegisterCourse:S})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"course-title",children:x.title}),(0,t.jsxs)("div",{className:"course-info",children:[(0,t.jsxs)("div",{className:"course-info-item",children:[(0,t.jsx)("span",{className:"course-info-item-label",children:"任课教师: "}),null===(r=b.current.teacher)||void 0===r?void 0:r.name]}),(0,t.jsxs)("div",{className:"course-info-item",children:[(0,t.jsx)("span",{className:"course-info-item-label",children:"学生人数: "}),null===(u=b.current.applyStudents)||void 0===u?void 0:u.length," 人"]})]}),(0,t.jsxs)("div",{className:"course-actions",children:[(0,t.jsxs)("div",{className:"course-price",children:[" ","\xa5 "+x.price]}),(0,t.jsx)(A,{courseInfo:x,onRegisterCourse:S})]}),(0,t.jsx)("div",{className:"share-area",children:(0,t.jsx)(P,{courseInfo:x})})]})})]}),(0,t.jsx)("section",{className:"course-intro",children:(0,t.jsx)(d,{items:R})})]})};var q=n(9008),z=n.n(q),V=!0;function B(e){let{data:s,client:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(z(),{children:[(0,t.jsx)("title",{children:"".concat(n.name," - ").concat(s.title," - 阿图教育")}),(0,t.jsx)("meta",{name:"description",content:s.summary}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("meta",{name:"keywords",content:"".concat(s.title,",").concat(n.name,",").concat(n.clientName,",阿图教育,信创,培训,计算机,科技,技术,r2,edu")})]}),(0,t.jsx)(F,{data:s})]})}}},function(e){e.O(0,[382,947,774,888,179],function(){return e(e.s=9032)}),_N_E=e.O()}]);